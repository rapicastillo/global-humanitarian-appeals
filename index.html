<!DOCTYPE html>
<html>
<head>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <style>
    body { background-color: black; }
    #title-slides-area { position: relative; background-color: whitesmoke; background: url(images/title-000.png); }
    #title-slides-area > .row { position: absolute; bottom: 0; }
    #title-slides-area > .row > div { height: 100%; position: relative; }
    #title-slides-area #stats-area { opacity: 0; }
    .people-fade { background-image: url(images/s1/people-row.png); background-size: cover; background-repeat: no-repeat; position: absolute; bottom: 0; width: 100%;}

    #title-slides-area #first-needs-graph {
      height: 0%; background-image: url(images/s1/arrow-up.png); background-position: center top; position: absolute; bottom: 0; width: 80%;

    }

    #ending-message-area { background-color: whitesmoke; }
    #ending-message-area h1 { padding: 40px; margin: 0;}
  </style>
  <!-- SLIDE 2 STYLE -->
  <style>
    body { margin: 0; padding: 0; }
    .data-icon img { width: 50px; height: 50px; }
    .burst-face-item { display: inline-block;}
    #burst-face-area { position: relative; overflow: hidden;}
    #burst-face-area .burst-face-row { opacity: 0.8; }
    #burst-face-area .burst-face-image {
      background-size: cover;
      position: absolute;
    }
    #burst-face-area .burst-face-initial-image {
      z-index: 1200;
    }
    #burst-face-area #burst-face-main-message { position: absolute; top: 50%; left: 50%; background-color: rgba(0,0,0,.8); width: 80%; font-size: 32px; z-index: 1300; color: white; padding: 20px;}
    .burst-face-item { position: relative; }
    .burst-face-row { text-align: center; }
  </style>

  <!-- SLIDE 3 STYLE -->
  <style>
    #s3-slide-show-stats .image-slideshow { position: relative; }
    #s3-slide-show-stats .image-slideshow .first-slide { z-index: 1000; }
    #s3-slide-show-stats .image-slideshow .second-slide { z-index: 900; }
    #s3-slide-show-stats .image-slideshow .third-slide { z-index: 800; }

    #s3-slide-show-stats .image-slideshow .first-slide,
    #s3-slide-show-stats .image-slideshow .second-slide,
    #s3-slide-show-stats .image-slideshow .third-slide
    {
      position: absolute;
      background-size: cover;
    }

    #s3-slide-show-stats .image-slideshow .first-slide { background-color: blue; }
    #s3-slide-show-stats .image-slideshow .second-slide { background-color: red; }
    #s3-slide-show-stats .image-slideshow .third-slide { background-color: yellow; }

    #s3-slide-show-stats .image-slideshow .fact-item {
      position: absolute;
      font-size: 48px;
      z-index: 2000;
      opacity: 0;
    }
  </style>
  <style>
      .image-slideshow-item { position: relative; }
      .image-slideshow-item .first-slide { z-index: 1000; }
      .image-slideshow-item .second-slide { z-index: 900; }
      .image-slideshow-item .third-slide { z-index: 800; }

      .image-slideshow-item .first-slide,
      .image-slideshow-item .second-slide,
      .image-slideshow-item .third-slide
      {
        position: absolute;
        background-size: cover;
        background-position: center center;

      }

      .image-slideshow-item .fact-item
      {
        color: #f47932;
        background-color: rgba(0, 56, 86, 0.70);
        padding: 5px 20px;

        font-size: 16px;

        right: 0px;
      }

      .image-slideshow-item .fact-item * {
        display: inline-block;
        vertical-align: middle;
      }

      .image-slideshow-item .country-title-item
      {
        position: absolute;
        top: 30px;
        opacity: 0;

        z-index: 2000;

        color: white;

        background-color: rgba(155, 182, 44, 0.70);
        padding: 5px 20px;

        font-size: 16px;
      }

      .image-slideshow-item .country-title-item h1 { margin: 0; font-size: 28px; }

      /*.image-slideshow .first-slide { background-image: url(http://ocha.smugmug.com/Countries/Philippines/Typhoon-Haiyan-Life-inside-and/i-GPfJ3z3/0/X3/December%2011%2C%202013%20A%20child%20affected%20by%20Typhoon%20Yolanda%20walk%20amid%20the%20debris%20around%20%20two%20ships%20that%20were%20carried%20inland%20by%20the%20storm%20surge.%20%20Source%20OCHA%20Gemma%20Cortes-X3.jpg) }
      .image-slideshow .second-slide { background-image: url(http://ocha.smugmug.com/Countries/Philippines/Typhoon-Haiyan-Life-inside-and/i-T4RszF2/0/X3/IMG_2351-X3.jpg); }
      .image-slideshow .third-slide { background-image: url(http://ocha.smugmug.com/Countries/Philippines/Typhoon-Haiyan-Life-inside-and/i-jPt5THK/1/X3/IMG_2408-X3.jpg); }*/

      .image-slideshow-item .fact-item {
        position: absolute;
        font-size: 22px;
        z-index: 2000;
        opacity: 0;
      }

      #slide-1-philippines .first-slide { background-image: url(images/l3/philippines/000.jpg); }
      #slide-1-philippines .second-slide { background-image: url(images/l3/philippines/001.jpg); }
      #slide-1-philippines .third-slide { background-image: url(images/l3/philippines/002.jpg); }

      #slide-2-syria .first-slide { background-image: url(images/l3/syria/000.jpg); }
      #slide-2-syria .second-slide { background-image: url(images/l3/syria/001.jpg); }
      #slide-2-syria .third-slide { background-image: url(images/l3/syria/002.jpg); }

      #slide-3-south-sudan .first-slide { background-image: url(images/l3/southsudan/000.jpg); }
      #slide-3-south-sudan .second-slide { background-image: url(images/l3/southsudan/001.jpg); }
      #slide-3-south-sudan .third-slide { background-image: url(images/l3/southsudan/002.jpg); }

      #slide-4-car .first-slide { background-image: url(images/l3/car/000.jpg); }
      #slide-4-car .second-slide { background-image: url(images/l3/car/001.jpg); }
      #slide-4-car .third-slide { background-image: url(images/l3/car/002.jpg); }

      #slide-5-iraq .first-slide { background-image: url(images/l3/iraq/000.jpg); }
      #slide-5-iraq .second-slide { background-image: url(images/l3/iraq/001.jpg); }
      #slide-5-iraq .third-slide { background-image: url(images/l3/iraq/002.jpg); }
    </style>
    <style>
     #transition-to-maps
   {
      background-color: #003855;
      background-image: url(images/transition/People-Full.png);
      background-size: 40%;

      position: relative;
   }
   #transition-to-maps #transition-map-overlay
   {
      width: inherit;
      height: inherit;
      background-size: cover;
      background-image: url(images/transition/AbstractMaps.png);
      position: absolute;

      z-index: 1px;

      top: 0;
      left: 0;
    }

    #transition-to-maps #transition-to-maps-message {
      position: absolute;
      z-index: 100;
      width: inherit;
      background-image: url(images/transition/Middle-Shapes.png);
      background-repeat: no-repeat;
      background-size: 100% 100%;
      height: 245px;

      text-align: center;

      top: 50%;
      margin-top: -170px;

      z-index: 2100;
    }

    #transition-to-maps #transition-to-maps-message #transition-message {
        position:relative;
        height: inherit;
        width: inherit;
        text-align: center;
    }

    #transition-to-maps #transition-to-maps-message #transition-message div{
      width: inherit;
      position: absolute;
      bottom: 2%;
      text-align: center;

      color: white;
    }

    #transition-to-maps #transition-to-maps-message #transition-message h3 strong
    {
      color: #f47932;
    }

    #thanks-to-our-donors {
      background-color: white;
    }
  </style>

  <style>
  #map-area {
    background: url(images/maps/tile.png);
  }
  #map-area, #map-area-countries
  {
    position: relative;
    color: white;
  }
    .map-country-item
    {

      padding: 5px 20px 20px;
      /*border: 1px solid #333333;*/
      float: left;
      /*width: 300px;*/
    }
    .map-country-item h3 { font-size: 24px; }
    .map-country-item::after { clear: both; }

    .country-item-info  { background-repeat: no-repeat; }
    .other-fact-item { margin-bottom: 2px; }
    .other-fact-item span, .other-fact-item img { display: inline-block; vertical-align: middle;  margin-right: 4px; }
    .other-fact-item img { width: 40px; height: 40px; }

    .map-count { color: #9ab62b; font-size: 38px;}
    #map-area { background-color: #003855; }
    #map-area #map-data-score {position: fixed; top: 0px; left: 0; width: 100%; text-align: center; color: #9ab62b; z-index: 2000;
background-color: rgba(0,0,0,0.7);
padding: 10px;
}
    #map-area #map-data-score h1 { display: inline; font-size: inherit;}
    #map-area #map-data-score * { font-size: 20px; vertical-align: middle; display: inline-block; }
  </style>

  <!-- MOSAIC -->
   <style>
    body { margin: 0; padding: 0; }
    .mosaic-item { display: inline-block;}
    #mosaic-area { position: relative; }
    #mosaic-area .mosaic-image {
      background-size: cover;
      position: absolute;
    }
    #mosaic-area .mosaic-initial-image {
      z-index: 1200;
    }
    #mosaic-area .mosaic-main-message { position: absolute; background-color: rgba(0,0,0,.8); width: 80%; font-size: 32px; z-index: 1300; color: white; padding: 20px;}
    .mosaic-item { position: relative; }
    .mosaic-row { text-align: center; }
  </style>

 <style>
    .image-success-item { position: relative; }
    .image-success-item .first-slide { z-index: 2500; }
    .image-success-item .second-slide { z-index: 900; }
    .image-success-item .third-slide { z-index: 800; }

    .image-success-item .first-slide,
    .image-success-item .second-slide,
    .image-success-item .third-slide
    {
      position: absolute;
      background-size: cover;
      background-position: center center;

    }

    .image-success-item .fact-item
    {
      color: #f47932;
      background-color: rgba(0, 56, 86, 0.70);
      padding: 5px 20px;

      font-size: 16px;

      left: 0px;
    }

    .image-success-item .fact-item * {
      display: inline-block;
      vertical-align: middle;
    }

    .image-success-item .country-title-item
    {
      position: absolute;
      top: 0px;
      width: 0px;
      opacity: 0;

      z-index: 2000;

      color: white;

      background-color: rgba(155, 182, 44, 0.70);
      padding: 5px 20px;

      font-size: 16px;
    }

    .image-success-item .country-title-item h1 { margin: 0; font-size: 28px; white-space: nowrap; }

    .image-success-item .fact-item {
      position: absolute;
      font-size: 22px;
      z-index: 2000;
      opacity: 0;

      white-space: nowrap;
      overflow: hidden;
    }

    #slide-success-1-philippines .first-slide { background-image: url(images/successes/philippines-fg.png); }
    #slide-success-1-philippines .second-slide { background-image: url(images/successes/philippines-bg.jpg); }

    #slide-success-3-south-sudan .first-slide { background-image: url(images/successes/philippines-fg.png); }
    #slide-success-3-south-sudan .second-slide { background-image: url(images/successes/philippines-bg.jpg); }

    #slide-success-5-iraq .first-slide { background-image: url(images/successes/philippines-fg.png); }
    #slide-success-5-iraq .second-slide { background-image: url(images/successes/philippines-bg.jpg); }
  </style>

</head>
<body>
  <div id="title-slides-area" class="fluid-container">
    <div class="row" style=" width: 100% ">
      <div class="col-md-7" id="first-with-people-fades">
        <div class="row">
          <div class="col-md-12 text-right">
            <h1>Global Humanitarian </h1>
            <h1>Overview 2014</h1>
            <h3>A consolidated appeal to support people affected by disaster and conflict</h3>
          </div>
        </div>
      </div>
      <div class="col-md-1" >
        <div id="first-needs-graph" style="">
          <h4>$<span  data-final-count="7.1" data-type="float">7.1</span>B</h4>
          <h5>required</h5>
        </div>
      </div>
      <div class="col-md-4">
        <div id="stats-area" style="position: absolute; bottom: 0;">
          <h2><img src="images/icons/people.png" width="60" height="60" /><span data-final-count="2.4" data-type="float" >0</span><span>M People in need</span></h2>

          <h2><img src="images/icons/people.png" width="60" height="60"  /><span data-final-count="1.2" data-type="float">0</span><span>M People to receive aid</span></h2>
          <h2><img src="http://placehold.it/60x60" /><span data-final-count="77" data-type="int">0</span><span>aid organizations appealing this year</span></h2>
        </div>
      </div>
    </div>
  </div>
  <div id="eyes-looking-area">
  </div>

  <!-- SECOND SLIDE:: FLOATING IMAGES -->
  <div id="burst-face-area">
    <div id="burst-face-main-message">
      <h3>
        Syria, South Sudan, Iraq, Central African Republic...
The humanitarian outlook for 2015 is concerning. We start the year with outstanding needs arising from emergencies of unprecedented severity. These four crises alone will account for XX per cent of the overall funding requirement.
      </h3>
    </div>
  </div>

  <!-- START OF: L3 SLIDES -->
  <div style="position: relative">
    <!-- div id="slide-1-philippines" class="image-slideshow-item" data-played-out="false"
        data-bottom-center="..."  data-top-bottom="..." data-emit-events>

      <div class="first-slide"></div>
      <div class="second-slide"></div>
      <div class="third-slide"></div> -->

      <!-- Facts -->
      <!-- <div class="fact-item" style="bottom: 200px;">
        <span class="fact-number" data-count="123400">0</span>
        <span class="data-icon"><img src="http://placehold.it/50x50" /></span>
        <span>People in need</span>
      </div>
      <div class="fact-item" style="bottom: 100px;">
        <span class="fact-number" data-count="1553400">0</span>
        <span class="data-icon"><img src="http://placehold.it/50x50" /></span>
        <span>Stat Number</span>
      </div>

      <div class="country-title-item"><h1>PHILIPPINES</h1></div>
    </div> -->

    <div id="slide-2-syria" class="image-slideshow-item" data-played-out="false"
        data-bottom-center="..." data-top-bottom="..." data-emit-events
    >
      <div class="first-slide"></div>
      <div class="second-slide"></div>
      <div class="third-slide"></div>

      <!-- Facts -->
      <div class="fact-item" style="bottom: 200px;">
        <span class="fact-number" data-count="12200000">0</span>
        <span class="data-icon"><img src="images/icons/people.png" /></span>
        <span>People in need</span>
      </div>
      <div class="fact-item" style="bottom: 100px;">
        <span class="fact-number" data-count="7600000">0</span>
        <span class="data-icon"><img src="images/icons/displaced.png" /></span>
        <span>Internally Displaced People</span>
      </div>

      <div class="country-title-item"><h1>SYRIA</h1></div>
    </div>

    <div id="slide-3-south-sudan" class="image-slideshow-item" data-played-out="false"
      data-bottom-center="..." data-top-bottom="..." data-emit-events
    >
      <div class="first-slide"></div>
      <div class="second-slide"></div>
      <div class="third-slide"></div>

      <!-- Facts -->
      <div class="fact-item" style="bottom: 200px;">
        <span class="fact-number" data-count="6400000">0</span>
        <span class="data-icon"><img src="images/icons/people.png" /></span>
        <span>People in need</span>
      </div>
      <div class="fact-item" style="bottom: 100px;">
        <span class="fact-number" data-count="1950000">0</span>
        <span class="data-icon"><img src="images/icons/displaced.png" /></span>
        <span>People Displaced Due to Conflict and Flooding</span>
      </div>

      <div class="country-title-item"><h1>SOUTH SUDAN</h1></div>
    </div>

    <!-- CAR -->
    <div id="slide-4-car" class="image-slideshow-item" data-played-out="false"
      data-bottom-center="..." data-top-bottom="..." data-emit-events
    >
      <div class="first-slide"></div>
      <div class="second-slide"></div>
      <div class="third-slide"></div>

      <!-- Facts -->
      <div class="fact-item" style="bottom: 200px;">
        <span class="fact-number" data-count="2700000">0</span>
        <span class="data-icon"><img src="images/icons/people.png" /></span>
        <span>People in need</span>
      </div>
      <div class="fact-item" style="bottom: 100px;">
        <span class="fact-number" data-count="1553400">0</span>
        <span class="data-icon"><img src="images/icons/displaced.png" /></span>
        <span>Internally Displaced People</span>
      </div>

      <div class="country-title-item"><h1>CENTRAL AFRICAN REPUBLIC</h1></div>
    </div>
      <!--IRAQ -->
      <div id="slide-5-iraq" class="image-slideshow-item" data-played-out="false"
      data-bottom-center="..." data-top-bottom="..." data-emit-events
    >
        <div class="first-slide"></div>
        <div class="second-slide"></div>
        <div class="third-slide"></div>

        <!-- Facts -->
        <div class="fact-item" style="bottom: 200px;">
          <span class="fact-number" data-count="5200000">0</span>
          <span class="data-icon"><img src="images/icons/people.png" /></span>
          <span>People in need</span>
        </div>
        <div class="fact-item" style="bottom: 100px;">
          <span class="fact-number" data-count="1553400">0</span>
          <span class="data-icon"><img src="images/icons/displaced.png" /></span>
          <span>Newly Displaced People since January 2014</span>
        </div>


        <div class="country-title-item"><h1>IRAQ</h1></div>
      </div>
    </div>
<!-- END OF: L3 SLIDES -->

<!-- START OF: TRANSITION FROM L3 to MAPS -->
<div id="transition-to-maps">
    <div id="transition-to-maps-message">
      <div id="transition-message">
        <div>
          <h3>
            But donors and partners across the humanitarian community <strong>must step up and respond</strong> <br/>to the needs of every single emergency.

          </h3>

          <h3>
            <strong>No country can be forgotten.</strong>
          </h3>
        </div>
      </div>
    </div>

    <div id="transition-map-overlay">
    </div>
  </div>
<!-- END OF: TRANSITION FROM L3 to MAPS -->

<!-- START OF: MAP AREA -->
<div id="map-area">
  <div id="map-data-score" data-anchor-target="#map-area" data-target="#map-area"
        data-100-center-top="opacity: 0" data-center-top="opacity: 1"
        data-bottom-bottom="opacity: 1; font-size: 32px;" data-top-bottom="font-size: 50px"
        ><img src='images/icons/people.png' height="50px"/> <h1>0</h1> People in need</div>
  <div id="map-area-countries"></div>
  <div style="clear:both"></div>
</div>
<!-- END OF: MAP AREA -->


<!-- START OF: MOSAIC MESSAGE AREA -->
<div id="mosaic-area">
  <div id="mosaic-area-container"

      data-bottom-top="position: relative"
      data-top-top="position: fixed; z-index: 1900; top: 0; left: 0; ">

    <div class="mosaic-main-message"
    data-200-center-top="opacity: 0;"
                                     data-center-top="opacity: 1"
                                     data-anchor-target="#thanks-to-our-donors">
      The relentless cycle of large scale natural disasters and brutal conflicts have strained the ability of the humanitarian system to respond.
      <br/>
    </div>

    <!-- <div class="mosaic-main-message" data--200-center-top="opacity: 1" data--100-center-top="opacity: 0" data-anchor-target="#thanks-to-our-donors">
      Saving lives is priceless: Humanitarian assistance is critical and saving lives imperative.
      We are often asked to do more with less.
       We have rethought the way we work.
      We are getting better at planning our response and maximizing our resources.
      Yet, inadequate funding means less food, less shelter, less clean water, less life-saving support to the millions caught up in crises across the globe.
    </div> -->
  </div>
</div>
<div id="thanks-to-our-donors" data-20-top-top="..." data-emit-events>
  <h1 style="padding: 40px;">In 2014, despite the fact that only 50% of our appeal was funded, we managed to able to scale-up life-saving operations in some of the most devastating crises.
  </h1>
</div>
<!-- END OF: MOSAIC MESSAGE AREA -->


<!-- START OF :: SUCCESS STORIES -->
<div style="position: relative" id ="success-stories-area">
    <div id="slide-success-1-philippines" class="image-success-item" data-played-out="false"
        data-center-top="..."  data-100-top-top="..." data-emit-events>

      <div class="first-slide"></div>
      <div class="second-slide" data-anchor-target="#slide-success-1-philippines"
        data-bottom-top="background-size: 150%; background-position-x: 0px"
        data-top-bottom="background-size: 100%; background-position-x: -150px;"></div>

      <!-- Facts -->
      <div class="country-title-item"><h1>PHILIPPINES</h1></div>

      <div class="fact-item" style="top: 40%;" data-change-to='{"width" : "50%", "opacity" : 1}' >
        <span class="fact-number" data-count="123400">0</span>
        <span class="data-icon"><img src="http://placehold.it/50x50" /></span>
        <span>People in need</span>
      </div>
      <div class="fact-item" style="top: 50%;" data-change-to='{"width" : "50%", "opacity" : 1}'>
        <span class="fact-number" data-count="1553400">0</span>
        <span class="data-icon"><img src="http://placehold.it/50x50" /></span>
        <span>Stat Number</span>
      </div>

    </div>

    <div id="slide-success-3-south-sudan" class="image-success-item" data-played-out="false"
       data-center-top="..."  data-100-top-top="..." data-emit-events>

      <div class="first-slide"></div>
      <div class="second-slide" data-anchor-target="#slide-success-3-south-sudan"
        data-bottom-top="background-size: 150%; background-position-x: 0px"
        data-top-bottom="background-size: 100%; background-position-x: -150px;"></div>

      <!-- Facts -->
      <div class="country-title-item"><h1>SOUTH SUDAN</h1></div>

      <div class="fact-item" style="top: 40%;" data-change-to='{"width" : "50%", "opacity" : 1}' >
        <span class="fact-number" data-count="123400">0</span>
        <span class="data-icon"><img src="http://placehold.it/50x50" /></span>
        <span>People in need</span>
      </div>
      <div class="fact-item" style="top: 50%;" data-change-to='{"width" : "50%", "opacity" : 1}'>
        <span class="fact-number" data-count="1553400">0</span>
        <span class="data-icon"><img src="http://placehold.it/50x50" /></span>
        <span>Stat Number</span>
      </div>

    </div>

      <!--IRAQ -->
      <div id="slide-success-5-iraq" class="image-success-item" data-played-out="false"
       data-center-top="..."  data-100-top-top="..." data-emit-events>

      <div class="first-slide"></div>
      <div class="second-slide" data-anchor-target="#slide-success-5-iraq"
        data-bottom-top="background-size: 150%; background-position-x: 0px"
        data-top-bottom="background-size: 100%; background-position-x: -150px;"></div>

      <!-- Facts -->
      <div class="country-title-item"><h1>IRAQ</h1></div>

      <div class="fact-item" style="top: 40%;" data-change-to='{"width" : "50%", "opacity" : 1}' >
        <span class="fact-number" data-count="123400">0</span>
        <span class="data-icon"><img src="http://placehold.it/50x50" /></span>
        <span>People in need</span>
      </div>
      <div class="fact-item" style="top: 50%;" data-change-to='{"width" : "50%", "opacity" : 1}'>
        <span class="fact-number" data-count="1553400">0</span>
        <span class="data-icon"><img src="http://placehold.it/50x50" /></span>
        <span>Stat Number</span>
      </div>

      </div>
    </div>
    <!-- END OF SUCCESS STORIES -->

<div id="ending-message-area">
  <h1>
    But in 2015 we want to be able to do more.
  </h1>
  <h1>
    Saving Lives is priceless. Humanitarian assistance is imperative. Aid organizations have rethought the way they work - through better planning, more innovative approaches, and more efficient programming.
  </h1>
  <h1>
    Yet, inadequate funding can only translate into less food, less shelter, less clean water, less care for the millions caught up in crises across the globe.
  </h1>
  <h1>
    Together, we need to do more.
  </h1>

  <h1>~ CALL TO ACTION AREA ~</h1>
</div>

<!-- Latest compiled and minified JavaScript -->
<script src="js/jquery-1.11.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<script src="js/skrollr.min.js"></script>
  <script type="text/javascript">

    $(function() {
      /* Styling ..*/
      $("#title-slides-area, #title-slides-area > .row").height($(window).height());

      /* Animation ..  */
      setTimeout ( function () {

        var parent = $("#first-with-people-fades");
        var bar_graph = $("#first-needs-graph");
        var people_layers = 12;
        for (var i = 0; i < people_layers; i ++) {

          var new_div = $("<div />").height(parent.height() * 0.05).addClass("people-fade").css({bottom: (parent.height() * 0.05 * i) + "px" });
          var opacity_new = ((people_layers - i) * (100/people_layers) / 100);
          parent.append( new_div );

          new_div.css("opacity", 0);
          new_div.delay((i+1) * 150).animate({ opacity: opacity_new }, 800);

        }

        bar_graph.css("height", "0%");
        bar_graph.animate({ height: "98%" }, 2000);

        $("#title-slides-area").find("[data-final-count]").each(function () {
            var $this = $(this);
            console.log($this);
            jQuery({ Counter: 0 }).animate({
                      Counter: parseFloat($this.attr("data-final-count")) }, {
                      duration: 2000,
                      easing: 'swing',
                      step: function () {
                        console.log(this.Counter);
                        if ($this.attr("data-type") == "int")
                        { $this.text( Math.ceil(this.Counter) ); }
                        else if ($this.attr("data-type") == "float")
                        { $this.text( Math.ceil(this.Counter * 10) / 10 ); }
                      }
              });

          });

        $("#title-slides-area #stats-area").css("opacity", 0).animate({ "opacity" : 1, bottom : "+=30px" }, 2000);

      },
      500);
    });

  </script>

  <!-- SCRIPTS FOR SECOND SLIDE -->

  <script type="text/javascript">

$(function() {
  /* Styling */
  $("#burst-face-main-message").css({"marginTop" : "-" +$("#burst-face-main-message").height() /2 + "px", "marginLeft" :
                  "-" + $("#burst-face-main-message").width()/2 + "px"});

  function slide_endlessly(row, speed, square_width, direction_)
  {

      if (direction_ == "right")
      {
        row.prepend(row.children(".burst-face-item")[row.children(".burst-face-item").length-1])
        // row.css("marginLeft", "-=" + square_width +"px");
        row.animate(
          { marginLeft: "+=" + square_width + "px" },
          speed,
          "linear",
          function () {
            row.css("marginLeft", "-=" + square_width +"px");
            slide_endlessly(row, speed, square_width, direction_);
          }
        );
      }
      else {
        row.append(row.children(".burst-face-item")[0]);
        row.animate(
          { marginLeft: "-=" + square_width + "px" },
          speed,
          "linear",
          function () {
            row.css("marginLeft", "+=" + square_width +"px");
            slide_endlessly(row, speed, square_width, direction_); }
        );
      }

  }

  function fader(item)
  {
    // var timeout_delay = (Math.random() * 5000) + 1000;
    // setTimeout(function() {
      var delay1 = (Math.random() * 5000) + 10000;
      var delay2 = (Math.random() * 10000) + 5000;

      item.delay(delay1).fadeOut("slow").delay(delay2).fadeIn("slow", function () { fader(item); });
    // }, timeout_delay);
  }

  $.get("d/image_list.json", function (data) {

      //cols
      var square_size = ( $(window).width() / $(window).height() ) * 73;

      var square_count_rows = Math.ceil($(window).height() / square_size);
      var square_count_cols = Math.ceil($(window).width() / square_size );

      var square_height = $(window).height() / (square_count_rows - 1);
      var square_width = $(window).width() / (square_count_cols - 1);

      // console.log(square_count_cols, square_count_rows);
      var direction = ["left", "right"];
      for ( var y = 0; y < square_count_rows - 1; y ++) {

        var row = $("<div />").addClass("burst-face-row");

        for ( var x = 0; x < square_count_cols - 1  + 2; x ++ ) {
          var img_data_1 = data.image_list[ Math.floor( Math.random() * data.image_list.length ) ];
          var img_data_2 = data.image_list[ Math.floor( Math.random() * data.image_list.length ) ];

          var item_1 = $("<div />").addClass("burst-face-image burst-face-initial-image")
                      .css({ "background-image":  "url(" + img_data_1 + ")", width : square_width + "px", height : square_height + "px" });
          var item_2 = $("<div />").addClass("burst-face-image burst-face-over-image")
                      .css({ "background-image": "url(" + img_data_2 + ")", width : square_width + "px", height : square_height + "px" });

          // console.log(img_data_1, img_data_2);


          var item = $("<div />").addClass("burst-face-item").width(square_width).height(square_height);
              item.append(item_1);
              item.append(item_2);

          fader(item_1);
          row.append(item);


        }
        row.height(square_height).css({"marginLeft" : "-" + square_width + "px"});

        var speed = 10000 + (Math.random() * 3000);

        console.log(row, speed, square_width);

        slide_endlessly(row, speed, square_width, direction[y % 2]);

        $("#burst-face-area").append(row);
      }

      $("#burst-face-area").width($(window).width());
      $(".burst-face-row").width($(window).width() + (square_width * 2));

  });
});


</script>


<script type="text/javascript">

  $(function () {

    var comma_format = d3.format(",");
    $(".image-slideshow-item, .image-slideshow-item .first-slide, \
          .image-slideshow-item .second-slide, \
          .image-slideshow-item .third-slide")
        .width($(window).width())
        .height($(window).height());


    /* DATA EVENT LISTENERS */
    $(".image-slideshow-item").on("dataBottomCenter", function(e, direction) {

        // console.log( $(this).offset().top, $(window).scrollTop(), $(this).offset().top - $(window).scrollTop() );
        // console.log("THIS", $(this), e, direction);
        var played = $(this).attr("data-played-out") == "true";

        if (!played) {
          var $target = $(this);

          console.log($(this));
          play_animation ($target);

          $(this).attr("data-played-out", "true");
        }

    });

    function play_animation($target) {
        $target.find(".country-title-item");
        $target.find(".first-slide").delay(500).fadeOut(500, function() {

            $(this).closest(".image-slideshow-item").find(".country-title-item").animate({opacity: 1, marginBottom: "+=10px"}, 2000);

            $(this).closest(".image-slideshow-item")
              .find(".fact-number").each(function() {

              var $this = $(this);
              console.log($this);

              $this.closest(".fact-item").delay(200).animate({opacity: 1, bottom: "+=20px" }, 3000, "swing");
              jQuery({ Counter: 0 }).animate({ Counter: parseInt($this.attr("data-count")) }, {
                duration: 2000,
                easing: 'swing',
                step: function () {
                  $this.text(comma_format( Math.ceil(this.Counter) ));
                }
              });
            });

            $target.find(".second-slide").delay(800).fadeOut(500, function() {});

        });
    };


  });

  </script>
  <script>
    $(function() {
      $("#transition-to-maps").width($(window).width()).height($(window).height());
    });
  </script>


  <script type="text/javascript">

$(function() {
  var comma_format = d3.format(",");
  var data;
  d3.json("d/map.json", function(error, json)
    {
      console.log(json);
      data = json;

      countries = d3
          .select("body #map-area #map-area-countries")
          .selectAll("div.map-country-item")
          .data(data.countries)
          .enter().append("div")
          .html(function(d) {



            var html = "";
            html += "<div class='country-item-info map-"+  d.type +"' style='background-image: url(" + d.map +")'>";
            if (d.type == "L3")
            {
              html += "<img src='http://placehold.it/30x30' />";
            }

            if (d.image != "")
            {
              html += "<img src='" + d.image + "' class='map-country-img' />";
            }

            html += "<h1 class='map-count' count-value='" + d.in_need + "'>0</h1>";
            html += "<h3>" + d.name + "</h3>";
            html += "<div class='other-facts'>";
            for (i in d.other_fig)
            {
              html +=   "<div class='other-fact-item'><img src='" + d.other_fig[i].image + "' /><span class='of-number' count-value='" + d.other_fig[i].count + "'>0</span><span class='of-label'> " + d.other_fig[i].label + "</span></div>";
            }
            html += "</div>";
            html += "</div>";

            return html;
          })
          .classed("map-country-item", true)
          .each(function(d) {
            if (d.style)
            {
              console.log(d.style);
              $(this).find(".country-item-info").css(d.style);
            }
          });




        //Set posision
        $("#map-area .map-country-item").each(function(i, item) {
          var marginTop = Math.random() * $(this).height()/4 * ( Math.random() < 0.5 ? -1 : 1 );
          //var marginTop = Math.random() * $(this).height();
           if (marginTop > 0) {
             marginTop += Math.random() * $(this).height();
           }
          var marginLeft = Math.random() * $(this).width()/3;

          $(this).css("marginTop", marginTop + "px");
          $(this).css("marginLeft", marginLeft + "px");


          // if ($(this).offset().left < $(this).width()) { console.log("YES"); $(this).css("marginLeft", 0); }

          console.log($(this).position(), $(this).offset());

          $(this).css({ top: $(this).position().top, left: $(this).position().left });
        });

        var mapAreaHeight = $("#map-area").height();
        $("#map-area").css("height", $("#map-area").height());

        $("#map-area .map-country-item").each(function(i, item) {
          $(this).css({position: "absolute", marginTop: "0", marginLeft: "0" });

          var marginTopFirstRandom = Math.floor(Math.random() * 50 );
          var marginTopLastRandom = Math.floor(Math.random() * -50 );
          $(this).attr("data-bottom", "margin-top: " + marginTopFirstRandom + "px");
          $(this).attr("data-top", "margin-top: "+ marginTopLastRandom + "px");

        });

        // var mapIncrement = () / (mapAreaHeight - $(window).height());
        $(window).bind("scroll", function () {

          //For map-area scroll area -- upper left area
          var mapAreaOffset = $("#map-area-countries").offset().top - $(window).height() - $(window).scrollTop();

          //For individual item..
          var w_height = $(window).height();

          var current_overall_total = 0;
          $(".map-country-item").each(function(i, item) {
            var _countryItem = $(this);
            var _localCounter = $(this).find('.map-count');

            var countryOffset = _countryItem.offset().top;

            if( i >= 0 ) {

              var perc_half = ((_countryItem.offset().top - $(window).height() - $(window).scrollTop()) * -1 / $(window).height()) / 3 * 4 ;


              var for_value = parseInt( _localCounter.attr("count-value") );

              var curr_local_value = 0;
              if ( perc_half > 0 && perc_half <=  1)
              {
                curr_local_value = Math.floor(perc_half * for_value);

              }
              else if (perc_half < 0) {  curr_local_value = 0; }
              else if (perc_half > 1) { curr_local_value = for_value; }

              _localCounter.text(  comma_format ( curr_local_value ) );

              current_overall_total += curr_local_value;

              _countryItem.find(".other-facts").attr("perc_half", perc_half);
              _countryItem.find(".other-facts")
                .find(".other-fact-item")
                .each(

                function(j, item_j) {
                var _otherFact = $(this);
                var perc_half = parseFloat(_otherFact.parent().attr("perc_half"));
                var otherCount = parseInt(_otherFact.find(".of-number").attr("count-value"));

                // console.log(perc_half, comma_format(Math.floor(otherCount * perc_half)));

                if (perc_half > 0 && perc_half <= 1)
                {
                  _otherFact.find(".of-number").text(comma_format(Math.floor(otherCount * perc_half)));
                } else if (perc_half <= 0)
                {
                  _otherFact.find(".of-number").text(0);
                } else if (perc_half > 1)
                {
                  _otherFact.find(".of-number").text(comma_format(otherCount));
                }
              });
              //$(window).height()
              // console.log(_countryItem.find("h3").text(), countryOffset,  $(window).scrollTop(), (countryOffset - $(window).scrollTop()),
                  // (($(window).height()/2) / (countryOffset - ($(window).scrollTop() - $(window).height()/2)))*2  );
            }

          });

          $("#map-data-score h1").text( comma_format( current_overall_total ) );

        });

        // var s = skrollr.init({
        // edgeStrategy: 'set',
        //   easing: {
        //     WTF: Math.random
        //   }
        // });
    });




});

</script>
<script type="text/javascript">

$(function() {
  /* Styling */

  $("#thanks-to-our-donors")
      .width($(window).width())
      .height($(window).height());

  $("#thanks-to-our-donors").on("data20TopTop", function(e, direction) {
    console.log("Thanks to our donors", e, direction);
    if (direction == "down")
    {
      $("#mosaic-area-container, #map-data-score").fadeOut("fast");
    }
    else // direction == "down"
    {
      $("#mosaic-area-container, #map-data-score").fadeIn("fast");
    }
  })

  $(".mosaic-main-message").each(function() {
      $(this).css({
          "marginTop" : "-" + $(this).height() /2 + "px",
          "marginLeft" : "-" + $(this).width()/2 + "px",
          "left" : $(window).width()/2 + "px",
          "top" : $(window).height()/2 + "px",
      });
    });

  function fader(item)
  {
    var timeout_delay = (Math.random() * 5000) + 1000;
    setTimeout(function() {
      var delay1 = (Math.random() * 5000) + 3000;
      var delay2 = (Math.random() * 5000) + 3000;

      item.delay(delay1).fadeOut("slow").delay(delay2).fadeIn("slow", function () { fader(item); });
    }, timeout_delay);
  }
  $.get("d/image_list.json", function (data) {

      //cols
      var square_size = ( $(window).width() / $(window).height() ) * 64;

      var square_count_rows = Math.ceil($(window).height() / square_size);
      var square_count_cols = Math.ceil($(window).width() / square_size );

      var square_height = $(window).height() / (square_count_rows - 1);
      var square_width = $(window).width() / (square_count_cols - 1);

      // console.log(square_count_cols, square_count_rows);
      for ( var y = 0; y < square_count_rows - 1; y ++) {

        var row = $("<div />").addClass("mosaic-row");

        for ( var x = 0; x < square_count_cols - 1; x ++ ) {



          var img_data_1 = data.image_list[ (y * square_count_rows + x) % data.image_list.length ];
          var img_data_2 = data.image_list[ Math.floor( Math.random() * data.image_list.length ) ];

          var item_1 = $("<div />").addClass("mosaic-image mosaic-initial-image")
                      .css({ "background-image":  "url(" + img_data_1 + ")", width : square_width + "px", height : square_height + "px" });
          var item_2 = $("<div />").addClass("mosaic-image mosaic-over-image")
                      .css({ "background-image": "url(" + img_data_2 + ")", width : square_width + "px", height : square_height + "px" });

          // console.log(img_data_1, img_data_2);


          var item = $("<div />").addClass("mosaic-item").width(square_width).height(square_height);
              item.append(item_1);
              item.append(item_2);

          fader(item_1);
          row.append(item);

        }
        row.height(square_height);

        $("#mosaic-area-container").append(row);

      }

      $("#mosaic-area").width($(window).width()).height($(window).height());


      var s = skrollr.init({
      keyframe: function(element,name, direction) {
          $(element).trigger(name, direction);
      }
      ,
      edgeStrategy: 'set',
        easing: {
          WTF: Math.random
        }
      });
  });
});


</script>

<script type="text/javascript">

  $(function () {

    var comma_format = d3.format(",");
    $(".image-success-item, .image-success-item .first-slide, \
          .image-success-item .second-slide, \
          .image-success-item .third-slide")
        .width($(window).width())
        .height($(window).height());


    /* DATA EVENT LISTENERS */
    $(".image-success-item").on("dataCenterTop", function(e, direction) {

      if (direction == "down")
      {
        var window_w = $(window).width();
        $(this).find(".country-title-item").stop(true, true).animate({ width : window_w + "px", opacity: "1"}, 2000);
      }
      else //down
      {
        console.log("UP", $(this).find(".country-title-item") );
        $(this).find(".country-title-item").stop(true, true).animate({ width : "0", opacity: "0"}, 2000);
      }

    });

    $(".image-success-item").on("data100TopTop", function(e, direction) {

        if (direction == "down")
        {

          $(this).find(".fact-item").each(function (i, item) {
            var change_json = JSON.parse( $(this).attr("data-change-to") );
            $(this).stop(true, true).delay(i * 500).animate(change_json, 2000);
          });

        }
        else //down
        {
          $(this).stop(true, true).find(".fact-item").animate({ width : "30px", opacity: "0"}, 2000);
        }

    });

    $(".image-success-item").on("dataBottomCenter", function(e, direction) {

        // console.log( $(this).offset().top, $(window).scrollTop(), $(this).offset().top - $(window).scrollTop() );
        // console.log("THIS", $(this), e, direction);
        var played = $(this).attr("data-played-out") == "true";

        if (!played) {
          var $target = $(this);

          console.log($(this));
          play_animation ($target);

          $(this).attr("data-played-out", "true");
        }

    });

  });
  </script>

</body>
</html>
